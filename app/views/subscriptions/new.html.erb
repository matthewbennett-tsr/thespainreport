<h1>Subscribe Now To Get Full Access To The Spain Report</h1>

<div class="article-lede">You are the customer. You chooose how much you want to pay to read The Spain Report. A simple, secure transaction. Instant access.</div>

<% if current_user.nil? %>
  <%= render 'subscriptionform' %>
<% elsif current_user.stripe_customer_id.nil? %>
  <%= render 'subscriptionform' %>
<% elsif current_user.stripe_customer_id? %>
  <div id="flash_success_div">You are already a valued subscriber and your subscription is up-to-date.</div>
<% else %>
<% end %>

<hr />

<h3>When You Subscribe</h3>

<ul>
  <li>You get immediate access to all of our current and archive content;</li>
  <li>You will get full-text e-mails with complete articles right in your inbox as soon as they are published;</li>
  <li>You can update all of your account details and choose your e-mail notification settings on the "My Account" page;</li>
  <li>You will be able to see all of your customer, subscription and payment details on the "My Account" page;</li>
  <li>Enjoy clean, safe, fast-loading articles, with no ads or spam, on all of your desktop, tablet and mobile devices;</li>
  <li>Build a richer mental model of a changing Spain and understand more about Spaniards' lives and struggles;</li>
</ul>

<div class="happy-subscribers">

<h3>Join Lots Of Happy Subscribers. Get Instant Access To All Of Our Content</h3>

<p>“Your reporting and comment are excellent – please keep up the good work! As a British person resident in Catalonia for the past 13 years, I really appreciate your objective and well written reporting of politics in Spain.“—John, Catalonia</p>

<p>“I have been a subscriber to The Spain Report for a few months and it is a cracking read: insightful, well written and independent. How refreshing it is not having to read a load of cut and pasted press releases from the corrupt cronies “running” the joint. This story was one of the best. It could be a candidate for Private Eye\’s Funny Old World column.…I subscribed to TSR as it covers important news with analysis and is delivered in a convenient format.“—Edward, Gibraltar</p>

<p>“Since my daughter has lived in Spain for many years and is now with a Spanish partner, I have taken up interest in Spain. But not being able to read or speak Spanish (to my regret), your initiative is ideal for me.“—Aad, Holland</p>

<p>“I enjoy reading The Spain Report and it\’s my go to when I want to understand the news in Spain. My Spanish is not yet good enough for me to grasp all I read in the Spanish press. Also I find your editorial line is more independent, and keener to question the news as you report it.“—Geoff</p>

<p>“Just wanted to let you know that I just subscribed and it was easier. The articles that you are writing are exactly what I want to read about – the employment situation, the corruption and what I need to look out for.“—Carlene, Canada</p>

<p>“I just love your editorial updates. You are erudite and succinct like no other commentator I have found, whats more, from an editorial stand point, you are consistent and up to the minute.“—Edward, Canary Islands</p>

<p>“I am really liking your website more and more, thanks for not continuing down the sensationalistic route!“—Nacho, Spain</p>

<p>“Thank you for filling me in on this crisis in Spain – I wouldn\’t have got so much information elsewhere.“—Judith, Ireland</p>

<p>“I just found out about The Spain Report and while I know Spanish, I really like the idea.“—Adam, Lisbon</p>

<p>“I am a new subscriber to your Spain Report. It is the only one in English that I receive. :)“—Jenny, USA</p>

<p>“We\’re already finding your insights interesting and enlightening.”—David, Spain</p>

<p>“I follow all your stuff on twitter and it is of excellent quality.“—Cathal, Dublin</p>

<p>“If you want regular #news from #Spain in English, please subscribe to @thespainreport. It’ll be money well spent. Great resource. #media“—Patrick, London</p>
</div>


<script src="https://creditcardjs.com/creditcardjs-v0.10.12.min.js"></script>
<script src="/assets/jquery.payment.js"></script>
<script>
    jQuery(function($) {
      $('[data-numeric]').payment('restrictNumeric');
      $('.cc-number').payment('formatCardNumber');
      $('.cc-exp').payment('formatCardExpiry');
      $('.cc-cvc').payment('formatCardCVC');

      $.fn.toggleInputError = function(erred) {
        this.parent('.form-group').toggleClass('has-error', erred);
        return this;
      };

      $('form').submit(function(e) {
        e.preventDefault();

        var cardType = $.payment.cardType($('.cc-number').val());
        $('.cc-number').toggleInputError(!$.payment.validateCardNumber($('.cc-number').val()));
        $('.cc-exp').toggleInputError(!$.payment.validateCardExpiry($('.cc-exp').payment('cardExpiryVal')));
        $('.cc-cvc').toggleInputError(!$.payment.validateCardCVC($('.cc-cvc').val(), cardType));
        $('.cc-brand').text(cardType);

        $('.validation').removeClass('text-danger text-success');
        $('.validation').addClass($('.has-error').length ? 'text-danger' : 'text-success');
      });

    });
</script>

<script type="text/javascript" src="https://js.stripe.com/v2/"></script>
<script type="text/javascript">
$(function(){
  Stripe.setPublishableKey('<%= Rails.configuration.stripe[:publishable_key] %>');
});

$('#payment-form').submit(function(event) {
  var form = $(this);
  form.find('button').prop('disabled', true);
  Stripe.createToken(form, stripeResponseHandler);
  return false;
});

function stripeResponseHandler(status, response) {
  var form = $('#payment-form');
  if (response.error) {
    form.find('.payment-errors').text(response.error.message);
    form.find('button').prop('disabled', false);
  } else {
    var token = response.id;
    form.append($('<input type="hidden" name="stripeToken">').val(token));
    form.get(0).submit();
  }
}
</script>